"use client";
import { jsx as _jsx } from "react/jsx-runtime";
import React from "react";
import Button from "../Button/index.js";
import Context from "./ToggleButtonGroup.context.js";
import useKeyboardArrowNavigation from "../../hooks/useKeyboardArrowNavigation.js";
const ToggleButtonGroupControlled = (props) => {
    const { onChange, value, selectionMode = "single", children, color, selectedColor, ...buttonGroupProps } = props;
    const rootRef = React.useRef(null);
    const handleChange = (args) => {
        const { event, value: itemValue, checked } = args;
        if (!itemValue)
            return;
        let nextValue = selectionMode === "single" ? [itemValue] : [...value];
        if (selectionMode === "multiple") {
            if (checked) {
                nextValue.push(itemValue);
            }
            else {
                nextValue = nextValue.filter((v) => v !== itemValue);
            }
        }
        if (onChange)
            onChange({ value: nextValue, event });
    };
    useKeyboardArrowNavigation({
        ref: rootRef,
    });
    return (_jsx(Context.Provider, { value: { onChange: handleChange, value, selectedColor, color }, children: _jsx(Button.Group, { ...buttonGroupProps, attributes: { ref: rootRef, ...buttonGroupProps?.attributes }, children: children }) }));
};
ToggleButtonGroupControlled.displayName = "ToggleButtonGroupControlled";
export default ToggleButtonGroupControlled;
