"use client";
import { jsx as _jsx } from "react/jsx-runtime";
import React from "react";
import { classNames } from "../../utilities/props.js";
import View from "../View/index.js";
import useDrag from "../../hooks/_private/useDrag.js";
import s from "./Resizable.module.css";
export const ResizableHandleContext = React.createContext({});
const ResizableHandle = (props) => {
    const { children } = props;
    const { containerRef, onDrag, index, direction } = React.useContext(ResizableHandleContext);
    const { ref, active } = useDrag((args) => {
        onDrag({ ...args, index });
    }, {
        containerRef,
        orientation: direction === "row" ? "horizontal" : "vertical",
    });
    const handleClassNames = classNames(s.handle, active && s["handle--dragging"]);
    if (children)
        return (_jsx(View.Item, { children: children({ ref }, { direction, status: active ? "dragging" : "idle" }) }));
    return (_jsx(View.Item, { className: handleClassNames, attributes: {
            role: "button",
            tabIndex: 0,
            "aria-hidden": true,
            ref: (el) => {
                // eslint-disable-next-line @typescript-eslint/ban-ts-comment
                // @ts-ignore
                ref.current = el;
            },
        } }));
};
export default ResizableHandle;
